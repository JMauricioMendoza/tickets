# Base de datos ‚Äì Plataforma de Gesti√≥n de Incidencias

Este archivo documenta la estructura de la base de datos. Se incluyen las tablas principales, sus relaciones y campos relevantes, as√≠ como una visi√≥n general del modelo de datos y sus prop√≥sitos.

---

## üìå Descripci√≥n general

La base de datos est√° dise√±ada para gestionar un sistema de tickets de soporte interno. Se compone de entidades principales como `usuario` y `ticket`, cat√°logos auxiliares y tablas de trazabilidad (logs). Todas las relaciones est√°n normalizadas, y se utilizan claves for√°neas para garantizar integridad referencial.

---

## üß© Diagrama Entidad-Relaci√≥n

![Diagrama](img/diagrama_er.png)

---

## üìö Tablas principales

### `usuario`

Contiene la informaci√≥n de los usuarios del sistema.

Campos clave:

- `nombre`: nombre completo del usuario.
- `usuario`: nombre de usuario (√∫nico).
- `password`: hash de contrase√±a.
- `administrador`: booleano para control de permisos.
- `estatus`: booleano para control de activaci√≥n/desactivaci√≥n.

---

### `ticket`

Registro de tickets de soporte generados por los usuarios.

Campos clave:

- `tipo_ticket_id`: referencia al √°rea de soporte.
- `descripcion`: detalle del problema.
- `estatus_ticket_id`: estatus actual del ticket.
- `creado_por`: nombre del usuario que lo cre√≥.
- `area_id`: √°rea que origina el ticket.
- `telegram_notificado`: si ya se notific√≥ v√≠a Telegram.

---

### `area`

Cat√°logo de √°reas de adscripci√≥n dentro del Instituto.

Campos: `nombre`, `estatus`, timestamps.

---

### `estatus_ticket`

Cat√°logo de posibles estatus que puede tener un ticket.

Ejemplo: Pendiente, Cancelado, Finalizado.

---

### `tipo_ticket`

Cat√°logo de √°reas que atienden los tickets.

Ejemplo: Internet y redes, Soporte t√©cnico y mantenimiento, Sistema SITEO.

---

### `usuario_tipo_ticket`

Tabla intermedia (muchos a muchos) que define qu√© usuarios pueden atender qu√© tipo de tickets.

Campos: `usuario_id`, `tipo_ticket_id`, `estatus`, timestamps.

---

### `sesion`

Manejo de tokens de sesi√≥n para los usuarios.

Campos: `usuario_id`, `token`, `expira_en`, `creado_en`.

---

## üßæ Trazabilidad: Tablas de Logs

Todas estas tablas siguen la misma estructura:

- `id`
- `<entidad>_id`: referencia al registro modificado.
- `usuario_id` (o `usuario_modificador_id`): qui√©n hizo el cambio.
- `accion`: descripci√≥n de la acci√≥n (`crear`, `editar`, `eliminar`, etc.).
- `creado_en`: timestamp del evento.

Tablas:

- `logs_usuario`
- `logs_area`
- `logs_estatus_ticket`
- `logs_tipo_ticket`
- `logs_sesion`

---

## üîó Relaciones clave

- Un `ticket` pertenece a una `area`, un `estatus_ticket`, y un `tipo_ticket`.
- Un `usuario` puede estar relacionado con varios `tipo_ticket` a trav√©s de `usuario_tipo_ticket`.
- Las tablas de logs est√°n relacionadas con su tabla principal y con el `usuario` que realiza la acci√≥n.
- `sesion` se relaciona con `usuario`.
